{"version":3,"sources":["scripts/app-d9a468ba71.js"],"names":["angular","module","constant","CONSTANTS","USERS_ENDPOINT","DEVELOPMENT","DEVELOPMENT_BASE","config","$stateProvider","$urlRouterProvider","$locationProvider","html5Mode","enabled","requireBase","otherwise","state","templateUrl","controller","abstract","controllerAs","url","data","pageTitle","resolve","auth","userInfoService","$location","$timeout","$rootScope","user","getUserInfo","username","path","apply","$q","vm","this","carousselInterval","carousselActive","noWrapSlides","carousselImages","image","id","text","loggedUser","mainCategories","name","subCategories","commonMethods","navbarLinkItems","allCategories","type","selectedCategory","allBrands","selectedBrand","logout","userInfo","directive","restrict","link","scope","el","attrs","$","on","evt","keyCode","trigger","factory","$window","getObjectFromLocalStorage","objectKey","model","localStorage","getItem","JSON","parse","setObjectInLocalStorage","object","LastSaveTime","Date","setItem","stringify","getObjectFromSessionStorage","sessionStorage","setObjectInSessionStorage","loginService","toastr","welcomeText","loginUser","then","res","success","DTO","token","rememberMeClicked","err","error","message","console","log","registerHelper","registerService","hasSecondInvoice","errorMessage","formIsInvalid","registerForm","password","confirmPassword","email","phone","shippingAddress","invoiceDetails","notes","subscribed","userData","registerInProgress","registerUser","userModelIsValid","validateUserModel","$log","$http","baseEndPoint","userModel","deferred","defer","post","headers","response","reject","promise","setSessionStoreageInUse","userInfoData","storageInUse","clientIsAuthenticated","clientUsername","setUserInfo","clear","validateEmail","re","test","disclaimer","length","usersEndPoint","run","$templateCache","put"],"mappings":"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","file":"scripts/app-d9a468ba71.js","sourcesContent":["(function () {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('spaStore', [\r\n      'ui.router',\r\n      'ui.bootstrap',\r\n      'ui.checkbox',\r\n      'ngAnimate',\r\n      'toastr',\r\n      'spaStore.admin',\r\n      'spaStore.users'\r\n    ])\r\n    .constant({\r\n      CONSTANTS: {\r\n        USERS_ENDPOINT: 'api/users/',\r\n        DEVELOPMENT: {\r\n          DEVELOPMENT_BASE: 'http://localhost:3030/'\r\n        }\r\n      }\r\n    })\r\n    .config(function ($stateProvider, $urlRouterProvider, $locationProvider) {\r\n      $locationProvider.html5Mode({\r\n        enabled: true,\r\n        requireBase: false\r\n      });\r\n      // Redirect any unmatched url\r\n      $urlRouterProvider.otherwise(\"/dashboard\");\r\n\r\n      $stateProvider\r\n        .state('main', {\r\n          templateUrl: 'app/main/views/main.html',\r\n          controller: 'MainController',\r\n          abstract: true,\r\n          controllerAs: 'main'\r\n        })\r\n\r\n        .state('main.dashboard', {\r\n          templateUrl: 'app/dashboard/views/dashboard.html',\r\n          url: '/dashboard',\r\n          data: {\r\n            pageTitle: 'Welcome'\r\n          },\r\n          controller: 'DashboardController',\r\n          controllerAs: 'dashboard'\r\n        })\r\n\r\n        .state('main.login', {\r\n          url: '/login',\r\n          templateUrl: 'app/users/login/views/login.html',\r\n          controller: 'LoginController',\r\n          controllerAs: 'login',\r\n          resolve: {\r\n            auth: function (userInfoService, $location,$timeout,$rootScope) {\r\n              var user = userInfoService.getUserInfo();\r\n              if(user){\r\n                if(user.username && user.username != 'Гост'){\r\n                  $location.path('/dashboard');\r\n                  $timeout(function(){\r\n                    $rootScope.apply();\r\n                  },10)\r\n                }\r\n              }\r\n            }\r\n          }\r\n        })\r\n    })\r\n\r\n})();\r\n\n(function () {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('spaStore')\r\n    .controller('DashboardController', function ($q, $rootScope, userInfoService) {\r\n      var vm = this;\r\n\r\n      //region Caroussel\r\n\r\n      vm.carousselInterval = 3000;\r\n      vm.carousselActive = 1;\r\n      vm.noWrapSlides = false;\r\n      vm.carousselImages = [{\r\n        image: 'http://www.taiwah.com.sg/images/products/thumbnail/18_20130118_10460878.jpg',\r\n        id: 0,\r\n        text: 'Promo text'\r\n      }, {\r\n        image: 'http://www.smartbuy.ru/images/anesi_brand.jpg',\r\n        id: 1,\r\n        text: 'Promo text'\r\n      }\r\n      ];\r\n\r\n\r\n      //endregion\r\n\r\n\r\n      userInfoService.loggedUser();\r\n\r\n      vm.mainCategories = [\r\n        {\r\n          name: 'Козметика за лице',\r\n          subCategories: [{\r\n            name: 'Суха Кожа',\r\n            subCategories: []\r\n          },{\r\n            name: 'Нормална Кожа',\r\n            subCategories: []\r\n          }\r\n          ]\r\n        },\r\n        {\r\n          name: 'Козметика за тяло',\r\n          subCategories: []\r\n        }\r\n      ];\r\n\r\n    });\r\n})();\r\n\n(function () {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('spaStore')\r\n    .controller('MainController', function ($q, userInfoService,$rootScope,commonMethods) {\r\n      var vm = this;\r\n\r\n      // vm.getUnpaidServices = function () {\r\n      //   var deferred = $q.defer();\r\n      //\r\n      //   $http.get(\"http://localhost:3030/main1\", {\r\n      //     'Content-Type': 'application/json'\r\n      //   }).success(function (response) {\r\n      //     console.log(response);\r\n      //   }).error(function (err) {\r\n      //     console.log(err)\r\n      //   });\r\n      // };\r\n\r\n      // vm.getUnpaidServices();\r\n\r\n      vm.navbarLinkItems = [\r\n        'Начало', 'За Козметици', 'Проомоции'\r\n      ];\r\n\r\n      //TODO Add api end point for that\r\n      vm.allCategories = [\r\n        {\r\n          name: 'Козметика за лице',\r\n          type: 'main'\r\n        },\r\n        {\r\n          name: 'Суха кожа',\r\n          type: 'sub'\r\n        }\r\n\r\n      ];\r\n      vm.selectedCategory = '';\r\n\r\n      vm.allBrands = [\r\n        'ANESI', 'Depileve', 'Belfeet', 'Ramason'\r\n      ];\r\n      vm.selectedBrand = '';\r\n\r\n      vm.logout = function(){\r\n        $rootScope.userInfo = {};\r\n        $rootScope.userInfo.username= 'Гост';\r\n        userInfoService.logout();\r\n      };\r\n\r\n      userInfoService.loggedUser();\r\n\r\n\r\n    });\r\n})();\r\n\n(function () {\r\n  'use strict';\r\n\r\n  angular.module('spaStore').directive('executeOnEnter', function () {\r\n    return {\r\n      restrict: 'A',\r\n      link: function (scope, el, attrs) {\r\n        $('body').on('keypress', function (evt) {\r\n          if (evt.keyCode === 13) {\r\n            el.trigger('click', function () {\r\n            });\r\n          }\r\n        })\r\n      }\r\n    }\r\n  })\r\n}());\r\n\r\n\n(function () {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('spaStore')\r\n    .factory('commonMethods', function ($window) {\r\n      var commonMethods = this;\r\n\r\n      commonMethods.getObjectFromLocalStorage = function (objectKey) {\r\n        var model = $window.localStorage.getItem(objectKey);\r\n        if (model != null) {\r\n          return JSON.parse(model);\r\n        } else {\r\n          return null;\r\n        }\r\n      };\r\n\r\n      commonMethods.setObjectInLocalStorage = function (objectKey, object) {\r\n        object.LastSaveTime = new Date();\r\n        $window.localStorage.setItem(objectKey, JSON.stringify(object));\r\n      };\r\n\r\n\r\n      commonMethods.getObjectFromSessionStorage = function (objectKey) {\r\n        var model = $window.sessionStorage.getItem(objectKey);\r\n        if (model != null) {\r\n          return JSON.parse(model);\r\n        } else {\r\n          return null;\r\n        }\r\n      };\r\n\r\n      commonMethods.setObjectInSessionStorage = function (objectKey, object) {\r\n        $window.sessionStorage.setItem(objectKey, JSON.stringify(object));\r\n      };\r\n\r\n      return this;\r\n    });\r\n\r\n} ());\r\n\n(function () {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('spaStore.users', ['ui.router'])\r\n    .config(function ($stateProvider) {\r\n\r\n      $stateProvider\r\n        .state('main.register', {\r\n          url: '/register',\r\n          templateUrl: 'app/users/register/views/register.html',\r\n          controller: 'RegisterController',\r\n          controllerAs: 'register',\r\n          resolve:{\r\n            auth: function($location,userInfoService){\r\n              var user = userInfoService.getUserInfo();\r\n              if(user){\r\n                $location.path('/dashboard');\r\n              }\r\n            }\r\n          }\r\n        });\r\n\r\n        // .state('login', {\r\n        //   url: '/login',\r\n        //   templateUrl: 'app/users/login/views/login.html',\r\n        //   controller: 'LoginController',\r\n        //   controllerAs: 'login'\r\n        // })\r\n    })\r\n\r\n\r\n\r\n})();\r\n\n(function () {\n  'use strict';\n\n  angular\n    .module('spaStore.users')\n    .controller('LoginController', function (loginService,toastr,$timeout,$location,commonMethods,$rootScope,userInfoService) {\n      var vm = this;\n\n      vm.welcomeText = 'Добре дошли в kozmetikabg.eu! Моля, въведете портребителско име и парола!';\n\n      vm.loginUser = function(){\n        debugger;\n        loginService.loginUser(vm.user)\n          .then(function(res){\n            toastr.success('Успешно влизане');\n\n\n            var DTO = {\n              username: vm.user.username,\n              token:res.token\n            };\n\n            if(vm.rememberMeClicked){\n              commonMethods.setObjectInLocalStorage('userInfo',DTO);\n            }else{\n              commonMethods.setObjectInSessionStorage('userInfo',DTO);\n            }\n            $rootScope.userInfo =  userInfoService.getUserInfo();\n            $timeout(function(){\n              $location.path('/dashboard');\n            },1000)\n          },function(err){\n            if(err=='No such user.'){\n              toastr.error('Няма такъв потребител');\n            }\n\n            if(err.message='Authentication failed. Wrong password.'){\n              toastr.error('Грешна парола');\n            }\n            console.log(err);\n\n          })\n      }\n\n\n    });\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('spaStore.users')\n    .controller('RegisterController', function (registerHelper, registerService, $timeout, $location, toastr) {\n      var vm = this;\n\n      vm.hasSecondInvoice = false;\n      vm.errorMessage = '';\n      vm.formIsInvalid = false;\n\n      vm.registerForm = {\n        username: 'Потребителско име:',\n        password: 'Парола:',\n        confirmPassword: 'Потвърди Парола:',\n        email: 'Email адрес:',\n        name: 'Име и фамилия:',\n        phone: 'Телефон за контакт:',\n        shippingAddress: 'Адрес за доставка:',\n        invoiceDetails: 'Данни за фактура:',\n        notes: 'Забележки:',\n        subscribed: 'Записан за новини'\n      };\n\n      vm.userData = {};\n\n      vm.registerInProgress = false;\n      vm.registerUser = function () {\n        if (!vm.registerInProgress) {\n          vm.registerInProgress = true;\n          var userModelIsValid = registerHelper.validateUserModel(vm.userData);\n\n          if (typeof userModelIsValid != 'boolean') {\n            vm.formIsInvalid = true;\n            toastr.error(userModelIsValid);\n            $timeout(function () {\n              vm.formIsInvalid = false;\n            }, 4000);\n            vm.registerInProgress = false;\n            return;\n          }\n\n          registerService.registerUser(vm.userData)\n            .then(function (res) {\n              vm.registerInProgress = false;\n              toastr.success('Потребителят е регистриран успешно');\n              $timeout(function () {\n                $location.path('/dashboard');\n              }, 2000);\n            }, function (err) {\n              vm.registerInProgress = false;\n              console.log(err)\n            })\n\n\n        }\n\n\n        console.log(vm.userData)\n      }\n\n\n    });\n})();\n\n(function () {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('spaStore.admin', ['ui.router'])\r\n    .config(function ($stateProvider) {\r\n\r\n      $stateProvider\r\n        .state('admin', {\r\n          url: '/admin/login',\r\n          templateUrl: 'app/admin/login/views/login-admin.html',\r\n          controller: 'LoginAdminController',\r\n          controllerAs: 'loginAdmin'\r\n        })\r\n    })\r\n\r\n})();\r\n\n(function () {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('spaStore.admin')\r\n    .controller('LoginAdminController', function ($log) {\r\n      var vm = this;\r\n      \r\n      $log.log('working admin');\r\n\r\n    });\r\n})();\r\n\n(function () {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('spaStore.users')\r\n    .factory('loginService',\r\n      function (CONSTANTS, $http, $q) {\r\n\r\n        var loginService = this;\r\n        var baseEndPoint = CONSTANTS.DEVELOPMENT.DEVELOPMENT_BASE,\r\n          usersEndPoint = CONSTANTS.USERS_ENDPOINT;\r\n\r\n\r\n        loginService.loginUser = function (userModel) {\r\n          var deferred = $q.defer();\r\n\r\n          $http.post(baseEndPoint + 'api/'+ 'token', userModel, {\r\n            headers: {}\r\n          }).success(function (response) {\r\n            deferred.resolve(response);\r\n          }).error(function (err) {\r\n            deferred.reject(err);\r\n          });\r\n\r\n          return deferred.promise;\r\n        };\r\n\r\n\r\n        return loginService;\r\n      });\r\n}());\r\n\n(function () {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('spaStore')\r\n    .factory('userInfoService', function (commonMethods,$location,$window,$rootScope) {\r\n      var userInfoService = this,\r\n        userInfo;\r\n\r\n      userInfoService.userInfo = {\r\n        clientIsAuthenticated: false,\r\n        clientUsername: ''\r\n      };\r\n\r\n      function setSessionStoreageInUse() {\r\n        var userInfoData = commonMethods.getObjectFromLocalStorage('userInfo');\r\n\r\n        if (userInfoData != null) {\r\n          userInfoService.storageInUse = 'localStorage';\r\n        } else {\r\n          userInfoService.storageInUse = 'sessionStorage';\r\n        }\r\n      }\r\n      setSessionStoreageInUse();\r\n\r\n      userInfoService.setUserInfo = function (userInfo) {\r\n        if (userInfoService.storageInUse == 'localStorage') {\r\n          commonMethods.setObjectInLocalStorage('userInfo', userInfo);\r\n        } else {\r\n          commonMethods.setObjectInSessionStorage('userInfo', userInfo);\r\n        }\r\n      };\r\n\r\n      userInfoService.getUserInfo = function () {\r\n        var userInfo = commonMethods.getObjectFromLocalStorage('userInfo');\r\n\r\n        if (userInfo == null) {\r\n          userInfo = commonMethods.getObjectFromSessionStorage('userInfo');\r\n        }\r\n\r\n        return userInfo;\r\n      };\r\n\r\n      // userInfoService.checkTokenExpiration = function () {\r\n      //   var currentDate = new Date();\r\n      //   currentDate.setSeconds(currentDate.getSeconds() + 10);\r\n      //   currentDate = Date.parse(currentDate);\r\n      //\r\n      //   var tokenDate = Date.parse($window.localStorage.expires);\r\n      //\r\n      //   if (isNaN(tokenDate)) {\r\n      //     return false;\r\n      //   }\r\n      //\r\n      //   return currentDate > tokenDate;\r\n      // };\r\n\r\n      userInfoService.logout = function () {\r\n        $window.localStorage.clear();\r\n        $window.sessionStorage.clear();\r\n        $location.path('/login');\r\n      };\r\n\r\n\r\n      userInfoService.loggedUser = function(){\r\n        $rootScope.userInfo =  userInfoService.getUserInfo();\r\n        if(!$rootScope.userInfo){\r\n          $rootScope.userInfo = {};\r\n          $rootScope.userInfo.username= 'Гост'\r\n        }\r\n      };\r\n\r\n      return this;\r\n    });\r\n\r\n}());\r\n\n(function () {\n  'use strict';\n\n  angular\n    .module('spaStore.users')\n    .factory('registerHelper',\n      function () {\n        var registerHelper = this;\n\n        function validateEmail(email)\n        {\n          var re = /\\S+@\\S+\\.\\S+/;\n          return re.test(email);\n        }\n\n        registerHelper.validateUserModel = function (userModel) {\n          //Check disclaimer\n          if (!userModel.disclaimer) {\n            return 'Тикчето с общите условия е задължително.';\n          }\n\n          //Validate Password\n          if (userModel.password == null || userModel.password.length <= 4) {\n            return 'Паролата трябва да е с минумум 5 символа';\n          }\n          if (userModel.password != userModel.confirmPassword) {\n            return 'Паролите не съвпадат';\n          }\n\n          //validate username\n          if (userModel.username == null || userModel.username.length <= 4) {\n            return 'Потребителското име трябва да е с минумум 5 символа';\n          }\n\n          //validate Email\n          if(userModel.email==null || !validateEmail(userModel.email)){\n            return 'Email полето е невалидно или празно';\n          }\n\n          return true;\n        };\n\n\n        return registerHelper;\n      });\n}());\n\n(function () {\n  'use strict';\n\n  angular\n    .module('spaStore.users')\n    .factory('registerService',\n      function (CONSTANTS, $http, $q) {\n\n        var registerService = this;\n        var baseEndPoint = CONSTANTS.DEVELOPMENT.DEVELOPMENT_BASE,\n          usersEndPoint = CONSTANTS.USERS_ENDPOINT;\n\n\n        registerService.registerUser = function (userModel) {\n          var deferred = $q.defer();\n\n          $http.post(baseEndPoint + usersEndPoint, userModel, {\n            headers: {}\n          }).success(function (response) {\n            deferred.resolve(response);\n          }).error(function (err) {\n            deferred.reject(err);\n          });\n\n          return deferred.promise;\n        };\n\n\n        return registerService;\n      });\n}());\n\nangular.module(\"spaStore\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/dashboard/views/dashboard.html\",\"<div style=\\\"height: 305px\\\" ng-controller=\\\"DashboardController\\\"><div uib-carousel=\\\"\\\" active=\\\"dashboard.carousselActive\\\" interval=\\\"dashboard.carousselInterval\\\" no-wrap=\\\"dashboard.noWrapSlides\\\"><div uib-slide=\\\"\\\" ng-repeat=\\\"slide in dashboard.carousselImages track by slide.id\\\" index=\\\"slide.id\\\"><img class=\\\"carousel-image-main\\\" ng-src=\\\"{{slide.image}}\\\" style=\\\"margin:auto;\\\"><div class=\\\"carousel-caption\\\"><h4>Slide {{slide.id}}</h4><p>{{slide.text}}</p></div></div></div></div><div class=\\\"row\\\"><div class=\\\"col-md-2\\\"><div id=\\\"MainMenu\\\"><div class=\\\"list-group panel navbar-sidebar-menu\\\"><a href=\\\"#demo3\\\" class=\\\"list-group-item list-group-item-success navbar-sidebar-menu\\\" data-toggle=\\\"collapse\\\" data-parent=\\\"#MainMenu\\\">Item 3</a><div class=\\\"collapse\\\" id=\\\"demo3\\\"><a href=\\\"#SubMenu1\\\" class=\\\"list-group-item\\\" data-toggle=\\\"collapse\\\" data-parent=\\\"#SubMenu1\\\">Subitem 1 <i class=\\\"fa fa-caret-down\\\"></i></a><div class=\\\"collapse list-group-submenu\\\" id=\\\"SubMenu1\\\"><a href=\\\"#\\\" class=\\\"list-group-item\\\" data-parent=\\\"#SubMenu1\\\">Subitem 1 a</a> <a href=\\\"#\\\" class=\\\"list-group-item\\\" data-parent=\\\"#SubMenu1\\\">Subitem 2 b</a> <a href=\\\"#SubSubMenu1\\\" class=\\\"list-group-item\\\" data-toggle=\\\"collapse\\\" data-parent=\\\"#SubSubMenu1\\\">Subitem 3 c <i class=\\\"fa fa-caret-down\\\"></i></a><div class=\\\"collapse list-group-submenu list-group-submenu-1\\\" id=\\\"SubSubMenu1\\\"><a href=\\\"#\\\" class=\\\"list-group-item\\\" data-parent=\\\"#SubSubMenu1\\\">Sub sub item 1</a> <a href=\\\"#\\\" class=\\\"list-group-item\\\" data-parent=\\\"#SubSubMenu1\\\">Sub sub item 2</a></div><a href=\\\"#\\\" class=\\\"list-group-item\\\" data-parent=\\\"#SubMenu1\\\">Subitem 4 d</a></div><a href=\\\"javascript:;\\\" class=\\\"list-group-item\\\">Subitem 2</a> <a href=\\\"javascript:;\\\" class=\\\"list-group-item\\\">Subitem 3</a></div><a href=\\\"#demo4\\\" class=\\\"list-group-item list-group-item\\\" data-toggle=\\\"collapse\\\" data-parent=\\\"#MainMenu\\\">Item 4</a><div class=\\\"collapse\\\" id=\\\"demo4\\\"><a href=\\\"\\\" class=\\\"list-group-item\\\">Subitem 1</a> <a href=\\\"\\\" class=\\\"list-group-item\\\">Subitem 2</a> <a href=\\\"\\\" class=\\\"list-group-item\\\">Subitem 3</a></div><a href=\\\"#demo5\\\" class=\\\"list-group-item list-group-item\\\" data-toggle=\\\"collapse\\\" data-parent=\\\"#MainMenu\\\">Item 5</a><div class=\\\"collapse\\\" id=\\\"demo5\\\"><a href=\\\"#\\\" class=\\\"list-group-item\\\">Subitem 1</a> <a href=\\\"\\\" class=\\\"list-group-item\\\">Subitem 2</a> <a href=\\\"\\\" class=\\\"list-group-item\\\">Subitem 3</a></div><div ng-repeat=\\\"mainCategory in dashboard.mainCategories\\\" class=\\\"navbar-sidebar-menu\\\"><a href=\\\"{{\\'#mainCategoryName\\'+$index}}\\\" class=\\\"list-group-item list-group-item navbar-sidebar-menu\\\" data-toggle=\\\"collapse\\\" data-parent=\\\"#MainMenu\\\">{{mainCategory.name}}</a><div class=\\\"collapse nnavbar-sidebar-menu\\\" id=\\\"{{\\'mainCategoryName\\'+$index}}\\\"><div class=\\\"navbar-sidebar-menu\\\" ng-if=\\\"mainCategory.subCategories.length>0\\\" ng-repeat=\\\"subCategory in mainCategory.subCategories\\\"><a href=\\\"#\\\" class=\\\"list-group-item navbar-sidebar-menu\\\">{{subCategory.name}}</a><div class=\\\"collapse list-group-submenu navbar-sidebar-menu\\\" id=\\\"{{\\'subMenuItem\\'+$index}}\\\"></div></div><a href=\\\"\\\" class=\\\"list-group-item\\\">Subitem 2</a> <a href=\\\"\\\" class=\\\"list-group-item\\\">Subitem 3</a></div></div></div></div></div><div class=\\\"col-md-10\\\" style=\\\"background-color: white\\\">Test</div></div>\");\n$templateCache.put(\"app/main/views/main.html\",\"<div class=\\\"row\\\" style=\\\"width:100%;height:80px;margin-bottom:15px\\\"><div class=\\\"inline-block col-md-3 col-sm-3 col-xs-3\\\" style=\\\"margin-left:3%;margin-top:11px;height:82%;vertical-align: middle;text-align: center;\\\"><img src=\\\"https://www.jobs.bg/assets/logo/2013-11-06/b_11450615a86c7729dd5335916f2a0ca9.JPG\\\" style=\\\"width:100%;max-height:100%\\\"></div><div class=\\\"inline-block col-md-8 col-sm-8 col-xs-8\\\" style=\\\"margin-top:11px;height:82%;vertical-align: middle;text-align: center;padding:20px;\\\"><ul class=\\\"list-inline helvetica-font\\\"><li class=\\\"inline-block\\\"><strong>Контакти</strong></li><li class=\\\"inline-block\\\"><strong>Общи условия</strong></li><li class=\\\"inline-block\\\"><strong>Профил</strong></li><li class=\\\"inline-block\\\"><div class=\\\"hidden-phone hidden-tablet\\\"><div class=\\\"form-group inline-block\\\"><input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Search\\\"></div><div class=\\\"form-group inline-block\\\"><select class=\\\"form-control\\\" ng-model=\\\"main.selectedBrand\\\" ng-options=\\\"brand for brand in main.allBrands\\\"></select></div><div class=\\\"form-group inline-block\\\"><select class=\\\"form-control\\\" ng-model=\\\"main.selectedCategory\\\"><option ng-class=\\\"{\\'ident-options\\':category.type!=\\'sub\\'}\\\" class=\\\"form-control\\\" ng-repeat=\\\"category in main.allCategories\\\">{{category.name}}</option></select></div><button type=\\\"submit\\\" class=\\\"btn btn-default\\\">Търси</button></div></li></ul></div></div><nav class=\\\"navbar navbar-default\\\"><div class=\\\"container-fluid\\\"><div class=\\\"navbar-header\\\"><button type=\\\"button\\\" class=\\\"navbar-toggle collapsed\\\" data-toggle=\\\"collapse\\\" data-target=\\\"#left-navigation-dropdown\\\" aria-expanded=\\\"false\\\"><span class=\\\"sr-only\\\"></span> <span class=\\\"icon-bar\\\"></span> <span class=\\\"icon-bar\\\"></span> <span class=\\\"icon-bar\\\"></span></button><div class=\\\"navbar-brand\\\">Спа Трейд ООД</div></div><div class=\\\"collapse navbar-collapse navbar-right\\\" id=\\\"left-navigation-dropdown\\\"><ul class=\\\"nav navbar-nav\\\"><li><a href=\\\"/dashboard\\\">Начало</a></li><li><a href=\\\"#\\\">Промоции</a></li><li><a href=\\\"#\\\">За Козметици</a></li><li class=\\\"dropdown\\\"><a href=\\\"#\\\" class=\\\"dropdown-toggle\\\" data-toggle=\\\"dropdown\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\">Dropdown <span class=\\\"caret\\\"></span></a><ul class=\\\"dropdown-menu\\\"><li><a href=\\\"#\\\">Action</a></li><li><a href=\\\"#\\\">Another action</a></li><li><a href=\\\"#\\\">Something else here</a></li><li role=\\\"separator\\\" class=\\\"divider\\\"></li><li><a href=\\\"#\\\">Separated link</a></li><li role=\\\"separator\\\" class=\\\"divider\\\"></li><li><a href=\\\"#\\\">One more separated link</a></li></ul></li></ul><ul class=\\\"nav navbar-nav\\\"><li class=\\\"dropdown\\\"><a href=\\\"#\\\" class=\\\"dropdown-toggle\\\" data-toggle=\\\"dropdown\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\">{{userInfo.username}} <span class=\\\"caret\\\"></span></a><ul class=\\\"dropdown-menu\\\"><li><a href=\\\"/login\\\">Логин</a></li><li><a href=\\\"#\\\">Моят профил</a></li><li><a href=\\\"/register\\\">Регистрация</a></li><li role=\\\"separator\\\" class=\\\"divider\\\"></li><li><a href=\\\"#\\\" ng-click=\\\"main.logout()\\\">Логаут</a></li></ul></li></ul></div></div></nav><div ui-view=\\\"\\\"></div><footer>Some Footer</footer>\");\n$templateCache.put(\"app/admin/login/views/login-admin.html\",\"<div style=\\\"margin:20% auto\\\"><div class=\\\"centered-content\\\"><div class=\\\"centered-text\\\">Welcome, Admin!Please log in!</div><input class=\\\"form-control input-admin centered-content\\\" type=\\\"text\\\" placeholder=\\\"Username\\\"> <input class=\\\"form-control input-admin centered-content\\\" type=\\\"password\\\" placeholder=\\\"Password\\\"><div class=\\\"centered-text\\\"><button class=\\\"btn btn-default inline-block\\\">Log in</button><div class=\\\"inline-block\\\">Remember me</div><checkbox ng-model=\\\"admin.checkboxModel\\\"></checkbox></div></div></div>\");\n$templateCache.put(\"app/users/login/views/login.html\",\"<div style=\\\"margin:20% auto\\\"><div class=\\\"centered-content\\\"><h3 class=\\\"centered-text\\\">{{login.welcomeText}}</h3><input class=\\\"form-control input-admin centered-content\\\" type=\\\"text\\\" placeholder=\\\"Потребителско име\\\" ng-model=\\\"login.user.username\\\"> <input class=\\\"form-control input-admin centered-content\\\" type=\\\"password\\\" placeholder=\\\"Парола\\\" ng-model=\\\"login.user.password\\\"><div class=\\\"centered-text\\\"><div class=\\\"btn btn-default inline-block\\\" ng-click=\\\"login.loginUser()\\\" execute-on-enter=\\\"\\\">Влез</div><div class=\\\"inline-block\\\">Запомни ме!</div><checkbox ng-model=\\\"login.rememberMeClicked\\\"></checkbox></div></div></div>\");\n$templateCache.put(\"app/users/register/views/register.html\",\"<div class=\\\"container-fluid\\\"><div class=\\\"row\\\"><div class=\\\"col-xs-10 col-sm-5 col-md-4\\\"><div class=\\\"form-group\\\"><label for=\\\"usernameRegister\\\">{{register.registerForm.username}}<span class=\\\"red-color\\\">*</span></label> <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"usernameRegister\\\" ng-model=\\\"register.userData.username\\\" placeholder=\\\"{{register.registerForm.username}}\\\"></div><div class=\\\"form-group\\\"><label for=\\\"passwordRegister\\\">{{register.registerForm.password}}<span class=\\\"red-color\\\">*</span></label> <input type=\\\"password\\\" class=\\\"form-control\\\" id=\\\"passwordRegister\\\" ng-model=\\\"register.userData.password\\\" placeholder=\\\"{{register.registerForm.password}}\\\"></div><div class=\\\"form-group\\\"><label for=\\\"confirmPassRegister\\\">{{register.registerForm.confirmPassword}}<span class=\\\"red-color\\\">*</span></label> <input type=\\\"password\\\" class=\\\"form-control\\\" id=\\\"confirmPassRegister\\\" ng-model=\\\"register.userData.confirmPassword\\\" placeholder=\\\"{{register.registerForm.confirmPassword}}\\\"></div><div class=\\\"form-group\\\"><label for=\\\"nameRegister\\\">{{register.registerForm.name}}<span class=\\\"red-color\\\">*</span></label> <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"nameRegister\\\" ng-model=\\\"register.userData.name\\\" placeholder=\\\"{{register.registerForm.name}}\\\"></div><div class=\\\"form-group\\\"><label for=\\\"emailRegister\\\">{{register.registerForm.email}}<span class=\\\"red-color\\\">*</span></label> <input type=\\\"email\\\" class=\\\"form-control\\\" id=\\\"emailRegister\\\" ng-model=\\\"register.userData.email\\\" placeholder=\\\"{{register.registerForm.email}}\\\"></div><div class=\\\"form-group\\\"><label for=\\\"phoneRegister\\\">{{register.registerForm.phone}}</label> <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"phoneRegister\\\" ng-model=\\\"register.userData.phone\\\" placeholder=\\\"{{register.registerForm.phone}}\\\"></div></div><div class=\\\"col-xs-10 col-sm-5 col-md-4\\\"><div class=\\\"form-group\\\"><label for=\\\"shippingAddress\\\">{{register.registerForm.shippingAddress}}</label> <textarea class=\\\"form-control\\\" ng-model=\\\"register.userData.shippingAddress\\\" rows=\\\"5\\\" id=\\\"shippingAddress\\\" placeholder=\\\"Град, улица, номер\\\"></textarea></div><div class=\\\"form-group\\\"><label for=\\\"invoiceDetails\\\">{{register.registerForm.invoiceDetails}}</label> <textarea class=\\\"form-control\\\" ng-model=\\\"register.userData.invoiceDetails\\\" rows=\\\"5\\\" id=\\\"invoiceDetails\\\" placeholder=\\\"Данни за фактура - първа фирма\\\"></textarea></div><div class=\\\"from-group\\\"><div class=\\\"btn btn-info\\\" ng-click=\\\"register.hasSecondInvoice = !register.hasSecondInvoice\\\">Добави/Премахни втора фирма</div></div><div class=\\\"clearfix\\\">&nbsp</div><div class=\\\"form-group\\\" ng-if=\\\"register.hasSecondInvoice\\\"><label for=\\\"invoiceDetails1\\\">{{register.registerForm.invoiceDetails}}</label> <textarea class=\\\"form-control\\\" ng-model=\\\"register.userData.secondInvoiceDetails\\\" rows=\\\"5\\\" id=\\\"invoiceDetails1\\\" placeholder=\\\"Данни за фактура - втора фирма\\\"></textarea></div><div class=\\\"form-group\\\"><label for=\\\"notesRegister\\\">{{register.registerForm.notes}}</label> <textarea class=\\\"form-control\\\" ng-model=\\\"register.userData.additionalInfo\\\" rows=\\\"5\\\" id=\\\"notesRegister\\\" placeholder=\\\"Други забележки\\\"></textarea></div></div></div><div class=\\\"row centered-text\\\"><div class=\\\"col-xs-10 col-sm-10 col-md-8\\\"><div class=\\\"inline-block\\\">Съгласен съм с обшите условия<span class=\\\"red-color\\\">*</span></div><checkbox ng-model=\\\"register.userData.disclaimer\\\"></checkbox><div class=\\\"inline-block\\\">Абонирам се за известия</div><checkbox ng-model=\\\"register.userData.isSubscribed\\\"></checkbox></div></div><div class=\\\"clearfix\\\">&nbsp</div><div class=\\\"clearfix\\\">&nbsp</div><div class=\\\"row centered-text\\\"><div class=\\\"col-xs-10 col-sm-10 col-md-8\\\"><div class=\\\"btn btn-success\\\" ng-click=\\\"register.registerUser()\\\" execute-on-enter=\\\"\\\">Регистрирай ме</div></div></div></div>\");}]);"],"sourceRoot":"/source/"}