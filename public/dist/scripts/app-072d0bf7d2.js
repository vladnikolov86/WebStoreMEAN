!function(){"use strict";angular.module("spaStore",["ui.router","ui.bootstrap","ui.checkbox","ngAnimate","toastr","spaStore.admin","spaStore.users"]).constant({CONSTANTS:{BASE:"http://localhost:3030/api/",USERS_ENDPOINT:"api/users/",DEVELOPMENT:{DEVELOPMENT_BASE:"http://localhost:3030/"}}}).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,r,t){t.html5Mode({enabled:!0,requireBase:!1}),r.otherwise("/dashboard"),e.state("main",{templateUrl:"app/main/views/main.html",controller:"MainController","abstract":!0,controllerAs:"main"}).state("main.dashboard",{templateUrl:"app/dashboard/views/dashboard.html",url:"/dashboard",data:{pageTitle:"Welcome"},controller:"DashboardController",controllerAs:"dashboard"}).state("main.dashboard.product",{templateUrl:"app/product/views/product.html",url:"/product",controller:"ProductController",controllerAs:"product"}).state("main.login",{templateUrl:"app/users/login/views/login.html",url:"/login",controller:"LoginController",controllerAs:"login",resolve:{auth:["userInfoService","$location","$timeout","$rootScope",function(e,r,t,s){var o=e.getUserInfo();o&&o.username&&"Гост"!=o.username&&(r.path("/dashboard"),t(function(){s.apply()},10))}]}})}])}(),function(){"use strict";angular.module("spaStore").controller("DashboardController",["$q","$rootScope","userInfoService","dashboardService",function(e,r,t,s){var o=this;o.carousselInterval=3e3,o.carousselActive=1,o.noWrapSlides=!1,o.carousselImages=[{image:"http://www.taiwah.com.sg/images/products/thumbnail/18_20130118_10460878.jpg",id:0,text:"Promo text"},{image:"http://www.smartbuy.ru/images/anesi_brand.jpg",id:1,text:"Promo text"}],t.loggedUser(),o.getCategories=function(){s.getCategories().then(function(e){o.mainCategories=e},function(e){console.log(e)})},o.products=[{name:"Крем за лице Аква Витал",heading:"Крем Аква Витал",description:"Някакъв примерен дескрипшън, тестов. Много хубав крем.",category:"Козметика за лице",subCategory:["За суха кожа"],iventoryId:5,picturePreview:"http://anesibeaute.com/sites/default/files/styles/product_full/public/product/anesi_haute_protection_creme_50ml_a_2.png?itok=FGV8xdvx",price:40,reviews:["Супер кремче","Тест ревю"]},{name:"Крем за лице Аква Витал",heading:"Крем Аква Витал",description:"Някакъв примерен дескрипшън, тестов. Много хубав крем.",category:"Козметика за лице",subCategory:["За суха кожа"],iventoryId:5,picturePreview:"http://anesibeaute.com/sites/default/files/styles/product_full/public/product/anesi_haute_protection_creme_50ml_a_2.png?itok=FGV8xdvx",price:40,reviews:["Супер кремче","Тест ревю"]},{name:"Крем за лице Аква Витал",heading:"Крем Аква Витал",description:"Някакъв примерен дескрипшън, тестов. Много хубав крем.",category:"Козметика за лице",subCategory:["За суха кожа"],iventoryId:5,picturePreview:"http://anesibeaute.com/sites/default/files/styles/product_full/public/product/anesi_haute_protection_creme_50ml_a_2.png?itok=FGV8xdvx",price:40,reviews:["Супер кремче","Тест ревю"]},{name:"Крем за лице Аква Витал",heading:"Крем Аква Витал",description:"Някакъв примерен дескрипшън, тестов. Много хубав крем.",category:"Козметика за лице",subCategory:["За суха кожа"],iventoryId:5,picturePreview:"http://anesibeaute.com/sites/default/files/styles/product_full/public/product/anesi_haute_protection_creme_50ml_a_2.png?itok=FGV8xdvx",price:40,reviews:["Супер кремче","Тест ревю"]}],console.log(o.mainCategories)}])}(),function(){"use strict";angular.module("spaStore").controller("ProductController",function(){console.log("product")})}(),function(){"use strict";angular.module("spaStore").controller("MainController",["$q","userInfoService","$rootScope","commonMethods",function(e,r,t,s){var o=this;o.navbarLinkItems=["Начало","За Козметици","Проомоции"],o.allCategories=[{name:"Козметика за лице",type:"main"},{name:"Суха кожа",type:"sub"}],o.selectedCategory="",o.allBrands=["ANESI","Depileve","Belfeet","Ramason"],o.selectedBrand="",o.logout=function(){t.userInfo={},t.userInfo.username="Гост",r.logout()},r.loggedUser()}])}(),function(){"use strict";angular.module("spaStore").directive("executeOnEnter",function(){return{restrict:"A",link:function(e,r,t){$("body").on("keypress",function(e){13===e.keyCode&&r.trigger("click",function(){})})}}})}(),function(){"use strict";angular.module("spaStore").factory("commonMethods",["$window",function(e){var r=this;return r.getObjectFromLocalStorage=function(r){var t=e.localStorage.getItem(r);return null!=t?JSON.parse(t):null},r.setObjectInLocalStorage=function(r,t){t.LastSaveTime=new Date,e.localStorage.setItem(r,JSON.stringify(t))},r.getObjectFromSessionStorage=function(r){var t=e.sessionStorage.getItem(r);return null!=t?JSON.parse(t):null},r.setObjectInSessionStorage=function(r,t){e.sessionStorage.setItem(r,JSON.stringify(t))},this}])}(),function(){"use strict";angular.module("spaStore").factory("dashboardService",["$http","$q","CONSTANTS",function(e,r,t){var s=this;return s.getCategories=function(){var s=r.defer();return e.get(t.BASE+"category",{"Content-Type":"application/json"}).success(function(e){s.resolve(e),console.log(e)}).error(function(e){s.reject(e),console.log(e)}),s.promise},s}])}(),function(){"use strict";angular.module("spaStore").directive("productDashboard",function(){return{restrict:"E",scope:{imageUrl:"=",heading:"=",price:"="},templateUrl:"app/dashboard/directives/productDashboard.html",controller:["$scope",function(e){}]}})}(),function(){"use strict";angular.module("spaStore.users",["ui.router"]).config(["$stateProvider",function(e){e.state("main.register",{url:"/register",templateUrl:"app/users/register/views/register.html",controller:"RegisterController",controllerAs:"register",resolve:{auth:["$location","userInfoService",function(e,r){var t=r.getUserInfo();t&&e.path("/dashboard")}]}})}])}(),function(){"use strict";angular.module("spaStore.users").controller("RegisterController",["registerHelper","registerService","$timeout","$location","toastr",function(e,r,t,s,o){var a=this;a.hasSecondInvoice=!1,a.errorMessage="",a.formIsInvalid=!1,a.registerForm={username:"Потребителско име:",password:"Парола:",confirmPassword:"Потвърди Парола:",email:"Email адрес:",name:"Име и фамилия:",phone:"Телефон за контакт:",shippingAddress:"Адрес за доставка:",invoiceDetails:"Данни за фактура:",notes:"Забележки:",subscribed:"Записан за новини"},a.userData={},a.registerInProgress=!1,a.registerUser=function(){if(!a.registerInProgress){a.registerInProgress=!0;var i=e.validateUserModel(a.userData);if("boolean"!=typeof i)return a.formIsInvalid=!0,o.error(i),t(function(){a.formIsInvalid=!1},4e3),void(a.registerInProgress=!1);r.registerUser(a.userData).then(function(e){a.registerInProgress=!1,o.success("Потребителят е регистриран успешно"),t(function(){s.path("/dashboard")},2e3)},function(e){a.registerInProgress=!1,console.log(e)})}console.log(a.userData)}}])}(),function(){"use strict";angular.module("spaStore").controller("LoginController",["loginService","toastr","$timeout","$location","commonMethods","$rootScope","userInfoService",function(e,r,t,s,o,a,i){var n=this;console.log("here"),n.welcomeText="Добре дошли в kozmetikabg.eu! Моля, въведете портребителско име и парола!",n.loginUser=function(){e.loginUser(n.user).then(function(e){r.success("Успешно влизане");var l={username:n.user.username,token:e.token};n.rememberMeClicked?o.setObjectInLocalStorage("userInfo",l):o.setObjectInSessionStorage("userInfo",l),a.userInfo=i.getUserInfo(),t(function(){s.path("/dashboard")},1e3)},function(e){"No such user."==e&&r.error("Няма такъв потребител"),"Authentication failed. Wrong password."==e.message&&r.error("Грешна парола")})}}])}(),function(){"use strict";angular.module("spaStore.admin",["ui.router"]).config(["$stateProvider",function(e){e.state("admin",{url:"/admin/login",templateUrl:"app/admin/login/views/login-admin.html",controller:"LoginAdminController",controllerAs:"loginAdmin"})}])}(),function(){"use strict";angular.module("spaStore.admin").controller("LoginAdminController",["$log",function(e){e.log("working admin")}])}(),function(){"use strict";angular.module("spaStore.users").factory("registerHelper",function(){function e(e){var r=/\S+@\S+\.\S+/;return r.test(e)}var r=this;return r.validateUserModel=function(r){return r.disclaimer?null==r.password||r.password.length<=4?"Паролата трябва да е с минумум 5 символа":r.password!=r.confirmPassword?"Паролите не съвпадат":null==r.username||r.username.length<=4?"Потребителското име трябва да е с минумум 5 символа":null==r.name||r.name.length<=4?"Полето с име е задължително":null!=r.email&&e(r.email)?!0:"Email полето е невалидно или празно":"Тикчето с общите условия е задължително."},r})}(),function(){"use strict";angular.module("spaStore.users").factory("registerService",["CONSTANTS","$http","$q",function(e,r,t){var s=this,o=e.DEVELOPMENT.DEVELOPMENT_BASE,a=e.USERS_ENDPOINT;return s.registerUser=function(e){var s=t.defer();return r.post(o+a,e,{headers:{}}).success(function(e){s.resolve(e)}).error(function(e){s.reject(e)}),s.promise},s}])}(),function(){"use strict";angular.module("spaStore.users").factory("loginService",["CONSTANTS","$http","$q",function(e,r,t){var s=this,o=e.DEVELOPMENT.DEVELOPMENT_BASE;e.USERS_ENDPOINT;return s.loginUser=function(e){var s=t.defer();return r.post(o+"api/token",e,{headers:{}}).success(function(e){s.resolve(e)}).error(function(e){s.reject(e)}),s.promise},s}])}(),function(){"use strict";angular.module("spaStore").factory("userInfoService",["commonMethods","$location","$window","$rootScope",function(e,r,t,s){function o(){var r=e.getObjectFromLocalStorage("userInfo");null!=r?a.storageInUse="localStorage":a.storageInUse="sessionStorage"}var a=this;return a.userInfo={clientIsAuthenticated:!1,clientUsername:""},o(),a.setUserInfo=function(r){"localStorage"==a.storageInUse?e.setObjectInLocalStorage("userInfo",r):e.setObjectInSessionStorage("userInfo",r)},a.getUserInfo=function(){var r=e.getObjectFromLocalStorage("userInfo");return null==r&&(r=e.getObjectFromSessionStorage("userInfo")),r},a.logout=function(){t.localStorage.clear(),t.sessionStorage.clear(),r.path("/login")},a.loggedUser=function(){s.userInfo=a.getUserInfo(),s.userInfo||(s.userInfo={},s.userInfo.username="Гост")},this}])}(),angular.module("spaStore").run(["$templateCache",function(e){e.put("app/dashboard/directives/productDashboard.html",'<div class="inline-block col-md-4 col-sm-4 col-xs-6 padding-15px"><div><img src="{{imageUrl}}" width="99%" height="99%"></div><div class="text-center">{{heading}}</div><div class="text-center">Цена: {{price}}</div><div class="text-center"><div class="btn btn-primary" ui-sref="main.dashboard.product">Детайли</div></div><div class="text-center margin-top-5px"><div class="btn btn-primary">Добави</div></div></div>'),e.put("app/dashboard/views/dashboard.html",'<div style="height: 305px" ng-init="dashboard.getCategories()"><div uib-carousel="" active="dashboard.carousselActive" interval="dashboard.carousselInterval" no-wrap="dashboard.noWrapSlides"><div uib-slide="" ng-repeat="slide in dashboard.carousselImages track by slide.id" index="slide.id"><img class="carousel-image-main" ng-src="{{slide.image}}" style="margin:auto;"><div class="carousel-caption"><h4>Slide {{slide.id}}</h4><p>{{slide.text}}</p></div></div></div></div><div class="row"><div class="col-md-3"><div id="MainMenu"><div class="list-group panel navbar-sidebar-menu"><div ng-repeat="mainCategory in dashboard.mainCategories" class="navbar-sidebar-menu"><a data-target="{{\'#mainCategoryName\'+$index}}" class="list-group-item list-group-item navbar-sidebar-menu" data-toggle="collapse" data-parent="#MainMenu">{{mainCategory.name}}</a><div class="collapse navbar-sidebar-menu list-group-submenu" id="{{\'mainCategoryName\'+$index}}"><div class="navbar-sidebar-menu" ng-repeat="subCategory in mainCategory.subCategories"><a data-target="{{\'#\'+subCategory.$$hashKey[subCategory.$$hashKey.length-2]+subCategory.$$hashKey[subCategory.$$hashKey.length-1]}}" class="list-group-item navbar-sidebar-menu" data-toggle="collapse" data-parent="{{\'#mainCategoryName\'+$index}}">{{subCategory.name}}</a><div class="collapse list-group-submenu navbar-sidebar-menu" id="{{subCategory.$$hashKey[subCategory.$$hashKey.length-2]+subCategory.$$hashKey[subCategory.$$hashKey.length-1]}}"><div class="navbar-sidebar-menu" ng-repeat="subSubCategory in subCategory.subCategories"><a class="list-group-item navbar-sidebar-menu" data-parent="{{subCategory.$$hashKey[subCategory.$$hashKey.length-2]+subCategory.$$hashKey[subCategory.$$hashKey.length-1]}}">{{subSubCategory.name}}</a></div></div></div></div></div></div></div></div><div ui-view=""><div class="col-md-6 background-product-catalog"><div ng-repeat="product in dashboard.products"><product-dashboard data-image-url="product.picturePreview" data-price="product.price" data-heading="product.heading"></product-dashboard><img src="/app/assets/icons/expand" width="50" height="50"></div></div></div></div>'),e.put("app/product/views/product.html","<div>Product</div>"),e.put("app/main/views/main.html",'<div class="row" style="width:100%;height:80px;margin-bottom:15px"><div class="inline-block col-md-3 col-sm-3 col-xs-3" style="margin-left:3%;margin-top:11px;height:82%;vertical-align: middle;text-align: center;"><img src="https://www.jobs.bg/assets/logo/2013-11-06/b_11450615a86c7729dd5335916f2a0ca9.JPG" style="width:100%;max-height:100%"></div><div class="inline-block col-md-8 col-sm-8 col-xs-8" style="margin-top:11px;height:82%;vertical-align: middle;text-align: center;padding:20px;"><ul class="list-inline helvetica-font"><li class="inline-block"><strong>Контакти</strong></li><li class="inline-block"><strong>Общи условия</strong></li><li class="inline-block"><strong>Профил</strong></li><li class="inline-block"><div class="hidden-phone hidden-tablet"><div class="form-group inline-block"><input type="text" class="form-control" placeholder="Search"></div><div class="form-group inline-block"><select class="form-control" ng-model="main.selectedBrand" ng-options="brand for brand in main.allBrands"></select></div><div class="form-group inline-block"><select class="form-control" ng-model="main.selectedCategory"><option ng-class="{\'ident-options\':category.type!=\'sub\'}" class="form-control" ng-repeat="category in main.allCategories">{{category.name}}</option></select></div><button type="submit" class="btn btn-default">Търси</button></div></li></ul></div></div><nav class="navbar navbar-default"><div class="container-fluid"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#left-navigation-dropdown" aria-expanded="false"><span class="sr-only"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button><div class="navbar-brand">Спа Трейд ООД</div></div><div class="collapse navbar-collapse navbar-right" id="left-navigation-dropdown"><ul class="nav navbar-nav"><li><a href="/dashboard">Начало</a></li><li><a href="#">Промоции</a></li><li><a href="#">За Козметици</a></li><li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a><ul class="dropdown-menu"><li><a href="#">Action</a></li><li><a href="#">Another action</a></li><li><a href="#">Something else here</a></li><li role="separator" class="divider"></li><li><a href="#">Separated link</a></li><li role="separator" class="divider"></li><li><a href="#">One more separated link</a></li></ul></li></ul><ul class="nav navbar-nav"><li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">{{userInfo.username}} <span class="caret"></span></a><ul class="dropdown-menu"><li><a href="/login">Логин</a></li><li><a href="#">Моят профил</a></li><li><a href="/register">Регистрация</a></li><li role="separator" class="divider"></li><li><a href="#" ng-click="main.logout()">Логаут</a></li></ul></li></ul></div></div></nav><div ui-view=""></div><footer>Some Footer</footer>'),e.put("app/admin/login/views/login-admin.html",'<div style="margin:20% auto"><div class="centered-content"><div class="centered-text">Welcome, Admin!Please log in!</div><input class="form-control input-admin centered-content" type="text" placeholder="Username"> <input class="form-control input-admin centered-content" type="password" placeholder="Password"><div class="centered-text"><button class="btn btn-default inline-block">Log in</button><div class="inline-block">Remember me</div><checkbox ng-model="admin.checkboxModel"></checkbox></div></div></div>'),e.put("app/users/login/views/login.html",'<div style="margin:20% auto"><div class="centered-content"><h3 class="centered-text">{{login.welcomeText}}</h3><input class="form-control input-admin centered-content" type="text" placeholder="Потребителско име" ng-model="login.user.username"> <input class="form-control input-admin centered-content" type="password" placeholder="Парола" ng-model="login.user.password"><div class="centered-text"><div class="btn btn-default inline-block" ng-click="login.loginUser()" execute-on-enter="">Влез</div><div class="inline-block">Запомни ме!</div><checkbox ng-model="login.rememberMeClicked"></checkbox></div></div></div>test'),e.put("app/users/register/views/register.html",'<div class="container-fluid"><div class="row"><div class="col-xs-10 col-sm-5 col-md-4"><div class="form-group"><label for="usernameRegister">{{register.registerForm.username}}<span class="red-color">*</span></label> <input type="text" class="form-control" id="usernameRegister" ng-model="register.userData.username" placeholder="{{register.registerForm.username}}"></div><div class="form-group"><label for="passwordRegister">{{register.registerForm.password}}<span class="red-color">*</span></label> <input type="password" class="form-control" id="passwordRegister" ng-model="register.userData.password" placeholder="{{register.registerForm.password}}"></div><div class="form-group"><label for="confirmPassRegister">{{register.registerForm.confirmPassword}}<span class="red-color">*</span></label> <input type="password" class="form-control" id="confirmPassRegister" ng-model="register.userData.confirmPassword" placeholder="{{register.registerForm.confirmPassword}}"></div><div class="form-group"><label for="nameRegister">{{register.registerForm.name}}<span class="red-color">*</span></label> <input type="text" class="form-control" id="nameRegister" ng-model="register.userData.name" placeholder="{{register.registerForm.name}}"></div><div class="form-group"><label for="emailRegister">{{register.registerForm.email}}<span class="red-color">*</span></label> <input type="email" class="form-control" id="emailRegister" ng-model="register.userData.email" placeholder="{{register.registerForm.email}}"></div><div class="form-group"><label for="phoneRegister">{{register.registerForm.phone}}</label> <input type="text" class="form-control" id="phoneRegister" ng-model="register.userData.phone" placeholder="{{register.registerForm.phone}}"></div></div><div class="col-xs-10 col-sm-5 col-md-4"><div class="form-group"><label for="shippingAddress">{{register.registerForm.shippingAddress}}</label> <textarea class="form-control" ng-model="register.userData.shippingAddress" rows="5" id="shippingAddress" placeholder="Град, улица, номер"></textarea></div><div class="form-group"><label for="invoiceDetails">{{register.registerForm.invoiceDetails}}</label> <textarea class="form-control" ng-model="register.userData.invoiceDetails" rows="5" id="invoiceDetails" placeholder="Данни за фактура - първа фирма"></textarea></div><div class="from-group"><div class="btn btn-info" ng-click="register.hasSecondInvoice = !register.hasSecondInvoice">Добави/Премахни втора фирма</div></div><div class="clearfix">&nbsp</div><div class="form-group" ng-if="register.hasSecondInvoice"><label for="invoiceDetails1">{{register.registerForm.invoiceDetails}}</label> <textarea class="form-control" ng-model="register.userData.secondInvoiceDetails" rows="5" id="invoiceDetails1" placeholder="Данни за фактура - втора фирма"></textarea></div><div class="form-group"><label for="notesRegister">{{register.registerForm.notes}}</label> <textarea class="form-control" ng-model="register.userData.additionalInfo" rows="5" id="notesRegister" placeholder="Други забележки"></textarea></div></div></div><div class="row centered-text"><div class="col-xs-10 col-sm-10 col-md-8"><div class="inline-block">Съгласен съм с обшите условия<span class="red-color">*</span></div><checkbox ng-model="register.userData.disclaimer"></checkbox><div class="inline-block">Абонирам се за известия</div><checkbox ng-model="register.userData.isSubscribed"></checkbox></div></div><div class="clearfix">&nbsp</div><div class="clearfix">&nbsp</div><div class="row centered-text"><div class="col-xs-10 col-sm-10 col-md-8"><div class="btn btn-success" ng-click="register.registerUser()" execute-on-enter="">Регистрирай ме</div></div></div></div>')}]);
//# sourceMappingURL=../maps/scripts/app-072d0bf7d2.js.map
