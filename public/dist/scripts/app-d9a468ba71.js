!function(){"use strict";angular.module("spaStore",["ui.router","ui.bootstrap","ui.checkbox","ngAnimate","toastr","spaStore.admin","spaStore.users"]).constant({CONSTANTS:{USERS_ENDPOINT:"api/users/",DEVELOPMENT:{DEVELOPMENT_BASE:"http://localhost:3030/"}}}).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,r,s){s.html5Mode({enabled:!0,requireBase:!1}),r.otherwise("/dashboard"),e.state("main",{templateUrl:"app/main/views/main.html",controller:"MainController","abstract":!0,controllerAs:"main"}).state("main.dashboard",{templateUrl:"app/dashboard/views/dashboard.html",url:"/dashboard",data:{pageTitle:"Welcome"},controller:"DashboardController",controllerAs:"dashboard"}).state("main.login",{url:"/login",templateUrl:"app/users/login/views/login.html",controller:"LoginController",controllerAs:"login",resolve:{auth:["userInfoService","$location","$timeout","$rootScope",function(e,r,s,a){var t=e.getUserInfo();t&&t.username&&"Гост"!=t.username&&(r.path("/dashboard"),s(function(){a.apply()},10))}]}})}])}(),function(){"use strict";angular.module("spaStore").controller("DashboardController",["$q","$rootScope","userInfoService",function(e,r,s){var a=this;a.carousselInterval=3e3,a.carousselActive=1,a.noWrapSlides=!1,a.carousselImages=[{image:"http://www.taiwah.com.sg/images/products/thumbnail/18_20130118_10460878.jpg",id:0,text:"Promo text"},{image:"http://www.smartbuy.ru/images/anesi_brand.jpg",id:1,text:"Promo text"}],s.loggedUser(),a.mainCategories=[{name:"Козметика за лице",subCategories:[{name:"Суха Кожа",subCategories:[]},{name:"Нормална Кожа",subCategories:[]}]},{name:"Козметика за тяло",subCategories:[]}]}])}(),function(){"use strict";angular.module("spaStore").controller("MainController",["$q","userInfoService","$rootScope","commonMethods",function(e,r,s,a){var t=this;t.navbarLinkItems=["Начало","За Козметици","Проомоции"],t.allCategories=[{name:"Козметика за лице",type:"main"},{name:"Суха кожа",type:"sub"}],t.selectedCategory="",t.allBrands=["ANESI","Depileve","Belfeet","Ramason"],t.selectedBrand="",t.logout=function(){s.userInfo={},s.userInfo.username="Гост",r.logout()},r.loggedUser()}])}(),function(){"use strict";angular.module("spaStore").directive("executeOnEnter",function(){return{restrict:"A",link:function(e,r,s){$("body").on("keypress",function(e){13===e.keyCode&&r.trigger("click",function(){})})}}})}(),function(){"use strict";angular.module("spaStore").factory("commonMethods",["$window",function(e){var r=this;return r.getObjectFromLocalStorage=function(r){var s=e.localStorage.getItem(r);return null!=s?JSON.parse(s):null},r.setObjectInLocalStorage=function(r,s){s.LastSaveTime=new Date,e.localStorage.setItem(r,JSON.stringify(s))},r.getObjectFromSessionStorage=function(r){var s=e.sessionStorage.getItem(r);return null!=s?JSON.parse(s):null},r.setObjectInSessionStorage=function(r,s){e.sessionStorage.setItem(r,JSON.stringify(s))},this}])}(),function(){"use strict";angular.module("spaStore.users",["ui.router"]).config(["$stateProvider",function(e){e.state("main.register",{url:"/register",templateUrl:"app/users/register/views/register.html",controller:"RegisterController",controllerAs:"register",resolve:{auth:["$location","userInfoService",function(e,r){var s=r.getUserInfo();s&&e.path("/dashboard")}]}})}])}(),function(){"use strict";angular.module("spaStore.users").controller("LoginController",["loginService","toastr","$timeout","$location","commonMethods","$rootScope","userInfoService",function(e,r,s,a,t,o,i){var n=this;n.welcomeText="Добре дошли в kozmetikabg.eu! Моля, въведете портребителско име и парола!",n.loginUser=function(){e.loginUser(n.user).then(function(e){r.success("Успешно влизане");var l={username:n.user.username,token:e.token};n.rememberMeClicked?t.setObjectInLocalStorage("userInfo",l):t.setObjectInSessionStorage("userInfo",l),o.userInfo=i.getUserInfo(),s(function(){a.path("/dashboard")},1e3)},function(e){"No such user."==e&&r.error("Няма такъв потребител"),(e.message="Authentication failed. Wrong password.")&&r.error("Грешна парола"),console.log(e)})}}])}(),function(){"use strict";angular.module("spaStore.users").controller("RegisterController",["registerHelper","registerService","$timeout","$location","toastr",function(e,r,s,a,t){var o=this;o.hasSecondInvoice=!1,o.errorMessage="",o.formIsInvalid=!1,o.registerForm={username:"Потребителско име:",password:"Парола:",confirmPassword:"Потвърди Парола:",email:"Email адрес:",name:"Име и фамилия:",phone:"Телефон за контакт:",shippingAddress:"Адрес за доставка:",invoiceDetails:"Данни за фактура:",notes:"Забележки:",subscribed:"Записан за новини"},o.userData={},o.registerInProgress=!1,o.registerUser=function(){if(!o.registerInProgress){o.registerInProgress=!0;var i=e.validateUserModel(o.userData);if("boolean"!=typeof i)return o.formIsInvalid=!0,t.error(i),s(function(){o.formIsInvalid=!1},4e3),void(o.registerInProgress=!1);r.registerUser(o.userData).then(function(e){o.registerInProgress=!1,t.success("Потребителят е регистриран успешно"),s(function(){a.path("/dashboard")},2e3)},function(e){o.registerInProgress=!1,console.log(e)})}console.log(o.userData)}}])}(),function(){"use strict";angular.module("spaStore.admin",["ui.router"]).config(["$stateProvider",function(e){e.state("admin",{url:"/admin/login",templateUrl:"app/admin/login/views/login-admin.html",controller:"LoginAdminController",controllerAs:"loginAdmin"})}])}(),function(){"use strict";angular.module("spaStore.admin").controller("LoginAdminController",["$log",function(e){e.log("working admin")}])}(),function(){"use strict";angular.module("spaStore.users").factory("loginService",["CONSTANTS","$http","$q",function(e,r,s){var a=this,t=e.DEVELOPMENT.DEVELOPMENT_BASE;e.USERS_ENDPOINT;return a.loginUser=function(e){var a=s.defer();return r.post(t+"api/token",e,{headers:{}}).success(function(e){a.resolve(e)}).error(function(e){a.reject(e)}),a.promise},a}])}(),function(){"use strict";angular.module("spaStore").factory("userInfoService",["commonMethods","$location","$window","$rootScope",function(e,r,s,a){function t(){var r=e.getObjectFromLocalStorage("userInfo");null!=r?o.storageInUse="localStorage":o.storageInUse="sessionStorage"}var o=this;return o.userInfo={clientIsAuthenticated:!1,clientUsername:""},t(),o.setUserInfo=function(r){"localStorage"==o.storageInUse?e.setObjectInLocalStorage("userInfo",r):e.setObjectInSessionStorage("userInfo",r)},o.getUserInfo=function(){var r=e.getObjectFromLocalStorage("userInfo");return null==r&&(r=e.getObjectFromSessionStorage("userInfo")),r},o.logout=function(){s.localStorage.clear(),s.sessionStorage.clear(),r.path("/login")},o.loggedUser=function(){a.userInfo=o.getUserInfo(),a.userInfo||(a.userInfo={},a.userInfo.username="Гост")},this}])}(),function(){"use strict";angular.module("spaStore.users").factory("registerHelper",function(){function e(e){var r=/\S+@\S+\.\S+/;return r.test(e)}var r=this;return r.validateUserModel=function(r){return r.disclaimer?null==r.password||r.password.length<=4?"Паролата трябва да е с минумум 5 символа":r.password!=r.confirmPassword?"Паролите не съвпадат":null==r.username||r.username.length<=4?"Потребителското име трябва да е с минумум 5 символа":null!=r.email&&e(r.email)?!0:"Email полето е невалидно или празно":"Тикчето с общите условия е задължително."},r})}(),function(){"use strict";angular.module("spaStore.users").factory("registerService",["CONSTANTS","$http","$q",function(e,r,s){var a=this,t=e.DEVELOPMENT.DEVELOPMENT_BASE,o=e.USERS_ENDPOINT;return a.registerUser=function(e){var a=s.defer();return r.post(t+o,e,{headers:{}}).success(function(e){a.resolve(e)}).error(function(e){a.reject(e)}),a.promise},a}])}(),angular.module("spaStore").run(["$templateCache",function(e){e.put("app/dashboard/views/dashboard.html",'<div style="height: 305px" ng-controller="DashboardController"><div uib-carousel="" active="dashboard.carousselActive" interval="dashboard.carousselInterval" no-wrap="dashboard.noWrapSlides"><div uib-slide="" ng-repeat="slide in dashboard.carousselImages track by slide.id" index="slide.id"><img class="carousel-image-main" ng-src="{{slide.image}}" style="margin:auto;"><div class="carousel-caption"><h4>Slide {{slide.id}}</h4><p>{{slide.text}}</p></div></div></div></div><div class="row"><div class="col-md-2"><div id="MainMenu"><div class="list-group panel navbar-sidebar-menu"><a href="#demo3" class="list-group-item list-group-item-success navbar-sidebar-menu" data-toggle="collapse" data-parent="#MainMenu">Item 3</a><div class="collapse" id="demo3"><a href="#SubMenu1" class="list-group-item" data-toggle="collapse" data-parent="#SubMenu1">Subitem 1 <i class="fa fa-caret-down"></i></a><div class="collapse list-group-submenu" id="SubMenu1"><a href="#" class="list-group-item" data-parent="#SubMenu1">Subitem 1 a</a> <a href="#" class="list-group-item" data-parent="#SubMenu1">Subitem 2 b</a> <a href="#SubSubMenu1" class="list-group-item" data-toggle="collapse" data-parent="#SubSubMenu1">Subitem 3 c <i class="fa fa-caret-down"></i></a><div class="collapse list-group-submenu list-group-submenu-1" id="SubSubMenu1"><a href="#" class="list-group-item" data-parent="#SubSubMenu1">Sub sub item 1</a> <a href="#" class="list-group-item" data-parent="#SubSubMenu1">Sub sub item 2</a></div><a href="#" class="list-group-item" data-parent="#SubMenu1">Subitem 4 d</a></div><a href="javascript:;" class="list-group-item">Subitem 2</a> <a href="javascript:;" class="list-group-item">Subitem 3</a></div><a href="#demo4" class="list-group-item list-group-item" data-toggle="collapse" data-parent="#MainMenu">Item 4</a><div class="collapse" id="demo4"><a href="" class="list-group-item">Subitem 1</a> <a href="" class="list-group-item">Subitem 2</a> <a href="" class="list-group-item">Subitem 3</a></div><a href="#demo5" class="list-group-item list-group-item" data-toggle="collapse" data-parent="#MainMenu">Item 5</a><div class="collapse" id="demo5"><a href="#" class="list-group-item">Subitem 1</a> <a href="" class="list-group-item">Subitem 2</a> <a href="" class="list-group-item">Subitem 3</a></div><div ng-repeat="mainCategory in dashboard.mainCategories" class="navbar-sidebar-menu"><a href="{{\'#mainCategoryName\'+$index}}" class="list-group-item list-group-item navbar-sidebar-menu" data-toggle="collapse" data-parent="#MainMenu">{{mainCategory.name}}</a><div class="collapse nnavbar-sidebar-menu" id="{{\'mainCategoryName\'+$index}}"><div class="navbar-sidebar-menu" ng-if="mainCategory.subCategories.length>0" ng-repeat="subCategory in mainCategory.subCategories"><a href="#" class="list-group-item navbar-sidebar-menu">{{subCategory.name}}</a><div class="collapse list-group-submenu navbar-sidebar-menu" id="{{\'subMenuItem\'+$index}}"></div></div><a href="" class="list-group-item">Subitem 2</a> <a href="" class="list-group-item">Subitem 3</a></div></div></div></div></div><div class="col-md-10" style="background-color: white">Test</div></div>'),e.put("app/main/views/main.html",'<div class="row" style="width:100%;height:80px;margin-bottom:15px"><div class="inline-block col-md-3 col-sm-3 col-xs-3" style="margin-left:3%;margin-top:11px;height:82%;vertical-align: middle;text-align: center;"><img src="https://www.jobs.bg/assets/logo/2013-11-06/b_11450615a86c7729dd5335916f2a0ca9.JPG" style="width:100%;max-height:100%"></div><div class="inline-block col-md-8 col-sm-8 col-xs-8" style="margin-top:11px;height:82%;vertical-align: middle;text-align: center;padding:20px;"><ul class="list-inline helvetica-font"><li class="inline-block"><strong>Контакти</strong></li><li class="inline-block"><strong>Общи условия</strong></li><li class="inline-block"><strong>Профил</strong></li><li class="inline-block"><div class="hidden-phone hidden-tablet"><div class="form-group inline-block"><input type="text" class="form-control" placeholder="Search"></div><div class="form-group inline-block"><select class="form-control" ng-model="main.selectedBrand" ng-options="brand for brand in main.allBrands"></select></div><div class="form-group inline-block"><select class="form-control" ng-model="main.selectedCategory"><option ng-class="{\'ident-options\':category.type!=\'sub\'}" class="form-control" ng-repeat="category in main.allCategories">{{category.name}}</option></select></div><button type="submit" class="btn btn-default">Търси</button></div></li></ul></div></div><nav class="navbar navbar-default"><div class="container-fluid"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#left-navigation-dropdown" aria-expanded="false"><span class="sr-only"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button><div class="navbar-brand">Спа Трейд ООД</div></div><div class="collapse navbar-collapse navbar-right" id="left-navigation-dropdown"><ul class="nav navbar-nav"><li><a href="/dashboard">Начало</a></li><li><a href="#">Промоции</a></li><li><a href="#">За Козметици</a></li><li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a><ul class="dropdown-menu"><li><a href="#">Action</a></li><li><a href="#">Another action</a></li><li><a href="#">Something else here</a></li><li role="separator" class="divider"></li><li><a href="#">Separated link</a></li><li role="separator" class="divider"></li><li><a href="#">One more separated link</a></li></ul></li></ul><ul class="nav navbar-nav"><li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">{{userInfo.username}} <span class="caret"></span></a><ul class="dropdown-menu"><li><a href="/login">Логин</a></li><li><a href="#">Моят профил</a></li><li><a href="/register">Регистрация</a></li><li role="separator" class="divider"></li><li><a href="#" ng-click="main.logout()">Логаут</a></li></ul></li></ul></div></div></nav><div ui-view=""></div><footer>Some Footer</footer>'),e.put("app/admin/login/views/login-admin.html",'<div style="margin:20% auto"><div class="centered-content"><div class="centered-text">Welcome, Admin!Please log in!</div><input class="form-control input-admin centered-content" type="text" placeholder="Username"> <input class="form-control input-admin centered-content" type="password" placeholder="Password"><div class="centered-text"><button class="btn btn-default inline-block">Log in</button><div class="inline-block">Remember me</div><checkbox ng-model="admin.checkboxModel"></checkbox></div></div></div>'),e.put("app/users/login/views/login.html",'<div style="margin:20% auto"><div class="centered-content"><h3 class="centered-text">{{login.welcomeText}}</h3><input class="form-control input-admin centered-content" type="text" placeholder="Потребителско име" ng-model="login.user.username"> <input class="form-control input-admin centered-content" type="password" placeholder="Парола" ng-model="login.user.password"><div class="centered-text"><div class="btn btn-default inline-block" ng-click="login.loginUser()" execute-on-enter="">Влез</div><div class="inline-block">Запомни ме!</div><checkbox ng-model="login.rememberMeClicked"></checkbox></div></div></div>'),e.put("app/users/register/views/register.html",'<div class="container-fluid"><div class="row"><div class="col-xs-10 col-sm-5 col-md-4"><div class="form-group"><label for="usernameRegister">{{register.registerForm.username}}<span class="red-color">*</span></label> <input type="text" class="form-control" id="usernameRegister" ng-model="register.userData.username" placeholder="{{register.registerForm.username}}"></div><div class="form-group"><label for="passwordRegister">{{register.registerForm.password}}<span class="red-color">*</span></label> <input type="password" class="form-control" id="passwordRegister" ng-model="register.userData.password" placeholder="{{register.registerForm.password}}"></div><div class="form-group"><label for="confirmPassRegister">{{register.registerForm.confirmPassword}}<span class="red-color">*</span></label> <input type="password" class="form-control" id="confirmPassRegister" ng-model="register.userData.confirmPassword" placeholder="{{register.registerForm.confirmPassword}}"></div><div class="form-group"><label for="nameRegister">{{register.registerForm.name}}<span class="red-color">*</span></label> <input type="text" class="form-control" id="nameRegister" ng-model="register.userData.name" placeholder="{{register.registerForm.name}}"></div><div class="form-group"><label for="emailRegister">{{register.registerForm.email}}<span class="red-color">*</span></label> <input type="email" class="form-control" id="emailRegister" ng-model="register.userData.email" placeholder="{{register.registerForm.email}}"></div><div class="form-group"><label for="phoneRegister">{{register.registerForm.phone}}</label> <input type="text" class="form-control" id="phoneRegister" ng-model="register.userData.phone" placeholder="{{register.registerForm.phone}}"></div></div><div class="col-xs-10 col-sm-5 col-md-4"><div class="form-group"><label for="shippingAddress">{{register.registerForm.shippingAddress}}</label> <textarea class="form-control" ng-model="register.userData.shippingAddress" rows="5" id="shippingAddress" placeholder="Град, улица, номер"></textarea></div><div class="form-group"><label for="invoiceDetails">{{register.registerForm.invoiceDetails}}</label> <textarea class="form-control" ng-model="register.userData.invoiceDetails" rows="5" id="invoiceDetails" placeholder="Данни за фактура - първа фирма"></textarea></div><div class="from-group"><div class="btn btn-info" ng-click="register.hasSecondInvoice = !register.hasSecondInvoice">Добави/Премахни втора фирма</div></div><div class="clearfix">&nbsp</div><div class="form-group" ng-if="register.hasSecondInvoice"><label for="invoiceDetails1">{{register.registerForm.invoiceDetails}}</label> <textarea class="form-control" ng-model="register.userData.secondInvoiceDetails" rows="5" id="invoiceDetails1" placeholder="Данни за фактура - втора фирма"></textarea></div><div class="form-group"><label for="notesRegister">{{register.registerForm.notes}}</label> <textarea class="form-control" ng-model="register.userData.additionalInfo" rows="5" id="notesRegister" placeholder="Други забележки"></textarea></div></div></div><div class="row centered-text"><div class="col-xs-10 col-sm-10 col-md-8"><div class="inline-block">Съгласен съм с обшите условия<span class="red-color">*</span></div><checkbox ng-model="register.userData.disclaimer"></checkbox><div class="inline-block">Абонирам се за известия</div><checkbox ng-model="register.userData.isSubscribed"></checkbox></div></div><div class="clearfix">&nbsp</div><div class="clearfix">&nbsp</div><div class="row centered-text"><div class="col-xs-10 col-sm-10 col-md-8"><div class="btn btn-success" ng-click="register.registerUser()" execute-on-enter="">Регистрирай ме</div></div></div></div>')}]);
//# sourceMappingURL=../maps/scripts/app-d9a468ba71.js.map
